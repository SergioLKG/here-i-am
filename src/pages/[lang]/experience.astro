---
import Layout from "../../layouts/Layout.astro";
import { getExperiences } from "@/components/Experience";

import { Calendar, MapPin, Briefcase } from "lucide-react";
import { array, undefined } from "astro:schema";

export function getStaticPaths() {
  return [{ params: { lang: "en" } }, { params: { lang: "es" } }];
}

const { lang } = Astro.params;
const validLang = lang === "en" || lang === "es" ? lang : "en";

const translations = {
  en: {
    title: "Experience - Sergio Domínguez Pérez",
    description:
      "Professional experience of Sergio Domínguez Pérez, a Full-Stack Developer based in Madrid, Spain.",
    pageTitle: "Professional Experience",
    pageDescription: "My journey as a developer",
    skills: "Skills",
    education: "Education",
    languages: "Languages",
    english: "English",
    spanish: "Spanish",
    galician: "Galician",
    fluent: "Fluent",
    advanced: "Advanced",
    native: "Native",
  },
  es: {
    title: "Experiencia - Sergio Domínguez Pérez",
    description:
      "Experiencia profesional de Sergio Domínguez Pérez, Desarrollador Full-Stack ubicado en Madrid, España.",
    pageTitle: "Experiencia Profesional",
    pageDescription: "Mi trayectoria como desarrollador",
    skills: "Habilidades",
    education: "Educación",
    languages: "Idiomas",
    english: "Inglés",
    spanish: "Español",
    galician: "Gallego",
    fluent: "Fluido",
    advanced: "Avanzado",
    native: "Nativo",
  },
};

const t = translations[validLang];

const experiences = getExperiences();

const education = [
  {
    degree: {
      en: "Higher Vocational Training in Multiplatform Application Development",
      es: "Ciclo Formativo de Grado Superior, Desarrollo de Aplicaciones Multiplataforma",
    },
    institution: {
      en: "IES Virgen de la Paz",
      es: "IES Virgen de la Paz",
    },
    period: {
      en: "2022 - 2024",
      es: "2022 - 2024",
    },
  },
  {
    degree: {
      en: "Intermediate Vocational Training in Microcomputer Systems and Networks",
      es: "Ciclo Formativo de Grado Medio, Técnico en Sistemas Microinformáticos y Redes",
    },
    institution: {
      en: "IES Rosa Chacel",
      es: "IES Rosa Chacel",
    },
    period: {
      en: "2020 - 2022",
      es: "2020 - 2022",
    },
  },
];
export const prerender = true;
---

<Layout title={t.title} description={t.description} lang={validLang}>
  <div class="container px-4 md:px-6 py-12 md:py-24">
    <div
      class="flex flex-col items-center justify-center space-y-4 text-center mb-12"
    >
      <div class="space-y-2">
        <h1 class="text-3xl font-bold tracking-tighter sm:text-4xl md:text-5xl">
          {t.pageTitle}
        </h1>
        <p class="max-w-[900px] text-gray-500 dark:text-gray-400 md:text-xl">
          {t.pageDescription}
        </p>
      </div>
    </div>

    <div class="space-y-16">
      {
        experiences.map((exp, index) => (
          <div class="grid md:grid-cols-[1fr_2fr] gap-8 items-start">
            <div>
              <h2 class="text-2xl font-bold">
                {exp.active ? (
                  <span class="inline-flex align-middle w-3 h-3 me-1 mb-1 animate-pulse bg-green-500 rounded-full" />
                ) : null}
                {exp.title[validLang]}
              </h2>
              <div class="flex flex-col gap-1 mt-2 text-gray-500 dark:text-gray-400">
                <div class="flex items-center gap-1">
                  <Briefcase className="w-4 h-4" />
                  <span>{exp.company}</span>
                </div>
                <div class="flex items-center gap-1">
                  <MapPin className="w-4 h-4" />
                  <span>{exp.location[validLang]}</span>
                </div>
                <div class="flex items-center gap-1">
                  <Calendar className="w-4 h-4" />
                  <span>{exp.period[validLang]}</span>
                </div>
              </div>
            </div>

            <div class="space-y-6">
              <p class="text-gray-700 dark:text-gray-300">
                {exp.description[validLang]}
              </p>

              {exp.responsibilities[validLang].length > 0 ? (
                <div>
                  <h3 class="font-medium mb-2">Responsibilities:</h3>
                  <ul class="list-disc pl-5 space-y-1">
                    {exp.responsibilities[validLang].map((responsibility) => (
                      <li>{responsibility}</li>
                    ))}
                  </ul>
                </div>
              ) : undefined}

              <div>
                <h3 class="font-medium mb-2">{t.skills}:</h3>
                <div class="flex flex-wrap gap-2">
                  {exp.skills.map((skill) => (
                    <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full text-sm">
                      {skill}
                    </span>
                  ))}
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>

    <div class="mt-16 grid md:grid-cols-2 gap-8">
      <div>
        <h2 class="text-2xl font-bold mb-6">{t.education}</h2>
        <div class="space-y-6">
          {
            education.map((edu) => (
              <div class="bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-200 dark:border-gray-800">
                <h3 class="font-bold text-lg">{edu.degree[validLang]}</h3>
                <div class="flex flex-col gap-1 mt-2 text-gray-500 dark:text-gray-400">
                  <div class="flex items-center gap-1">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-4 w-4"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path d="M12 14l9-5-9-5-9 5 9 5z" />
                      <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z" />
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"
                      />
                    </svg>
                    <span>{edu.institution[validLang]}</span>
                  </div>
                  <div class="flex items-center gap-1">
                    <Calendar className="w-4 h-4" />
                    <span>{edu.period[validLang]}</span>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>

      <div>
        <h2 class="text-2xl font-bold mb-6">{t.languages}</h2>
        <div class="space-y-6">
          <div
            class="bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-200 dark:border-gray-800"
          >
            <h3 class="font-bold text-lg">{t.english}</h3>
            <div class="mt-2">
              <div
                class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"
              >
                <div class="bg-primary h-2.5 rounded-full" style="width: 70%">
                </div>
              </div>
              <p
                class="text-right text-sm mt-1 text-gray-500 dark:text-gray-400"
              >
                {t.advanced}
              </p>
            </div>
          </div>

          <div
            class="bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-200 dark:border-gray-800"
          >
            <h3 class="font-bold text-lg">{t.spanish}</h3>
            <div class="mt-2">
              <div
                class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"
              >
                <div class="bg-primary h-2.5 rounded-full" style="width: 100%">
                </div>
              </div>
              <p
                class="text-right text-sm mt-1 text-gray-500 dark:text-gray-400"
              >
                {t.native}
              </p>
            </div>
          </div>
          <div
            class="bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-200 dark:border-gray-800"
          >
            <h3 class="font-bold text-lg">{t.galician}</h3>
            <div class="mt-2">
              <div
                class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"
              >
                <div class="bg-primary h-2.5 rounded-full" style="width: 100%">
                </div>
              </div>
              <p
                class="text-right text-sm mt-1 text-gray-500 dark:text-gray-400"
              >
                {t.native}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>
